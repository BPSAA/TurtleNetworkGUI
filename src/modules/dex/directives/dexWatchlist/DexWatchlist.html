<div class="wrapper">

    <div class="titles-wrap">
        <a
            href="#"
            class="title"
            ng-repeat="tabData in $ctrl.tabsData"
            ng-class="{
                'active': $ctrl.isActive(tabData)
            }"
            ng-click="$ctrl.chooseTab(tabData)"
        >
            {{::tabData.title}}
        </a>

        <w-select
            ng-class="{
                'active': $ctrl.tabFromSelectIsActive()
            }"
        >
            <w-option
                ng-repeat="tabData in $ctrl.dropDownData"
                ng-click="$ctrl.chooseSelectTab(tabData)"
            >{{::tabData.title}}
            </w-option>
        </w-select>
        <div class="select-hover" ng-if="!$ctrl.tabFromSelectIsActive()" ng-click="$ctrl.chooseSelectTab()"></div>
    </div>

    <div class="input-container">
        <w-input placeholder="directives.watchlist.placeholders.coin"
                 ng-model="$ctrl.search"
                 ng-class="{
                'searching': $ctrl.searchInProgress
              }" w-i18n-attr="placeholder"></w-input>
        <i ng-if="$ctrl.search.length > 0"
           class="input-clear"
           ng-click="$ctrl.search = ''"></i>
    </div>
    <w-loader ng-if="$ctrl.pending"></w-loader>
    <w-smart-table ng-if="!$ctrl.pending"
                   data="$ctrl.visiblePairsData"
                   header-info="$ctrl.headers"
                   class="smart-table">
        <div class="not-found basic-500" ng-if="$ctrl.nothingFound">
            <w-i18n>directives.watchlist.placeholders.noMarkets</w-i18n>
        </div>
        <w-table-row ng-repeat="pair in $data"
                     ng-click="$ctrl.choosePair(pair)"
                     ng-class="[{'selected': $ctrl.isChosen(pair)}, pair.uid]"
        >
            <w-table-cell>
                <i class="icon-fav"
                   ng-class="{
                       'active': $ctrl.isFavourite(pair)
                   }"
                   ng-click="$ctrl.toggleFavourite($event, pair)"
                ></i>
            </w-table-cell>
            <w-table-cell>
                <span>{{::pair.pair}}</span>
                <div class="tooltip left">{{::pair.pair || '—'}}</div>
            </w-table-cell>
            <w-table-cell>
                <span>{{pair.price.toFormat() || '—'}}</span>
                <div class="tooltip center">{{pair.price.toFormat() || '—'}}</div> <!-- todo @boris -->
            </w-table-cell>
            <w-table-cell ng-class="{
                        'plus': $ctrl.isPositive(pair.change),
                        'minus': $ctrl.isNegative(pair.change)
                      }">
                <span ng-if="$ctrl.isPositive(pair.change)">+</span><span>{{ pair.change }}</span>{{ pair.change ? '%' : '—' }}
            </w-table-cell>
            <w-table-cell>
                <span ng-if="pair.volume" w-nice-number="pair.volume" short-mode="::true" precision="2"></span>
                <span ng-if="!pair.volume">—</span>
                <div class="tooltip right">{{ pair.volume.toFormat() || '—' }}</div>
            </w-table-cell>
            <w-table-cell ng-if="$ctrl.isChosen(pair)">
                <a href="#" class="disabled-900">{{::pair.amountAsset.id}}</a> <span>/</span>
                <a href="#" class="disabled-900">{{::pair.priceAsset.id}}</a>
            </w-table-cell>
        </w-table-row>
    </w-smart-table>
</div>
