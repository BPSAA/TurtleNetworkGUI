<w-loader ng-if="$ctrl.pending"></w-loader>

<div ng-if="!$ctrl.pending" class="import-modal">
    <div class="btn icon-close" w-modal-close></div>

    <div ng-if="$ctrl.userList.length">

        <h3 class="text-center basic-700" w-i18n="modal.import.selectAccountToImport"></h3>

        <ul class="import-modal__select">
            <li ng-repeat="user in $ctrl.userList track by user.address">
                <w-avatar class="margin-right-1" size="30" address="::user.address"></w-avatar>
                <div class="mobile-caption-2" ng-class="{'has-name': !!user.name}">
                    <span ng-if="::user.name" class="name basic-700">{{::user.name}}</span>
                    <span class="address basic-500">{{::user.address}}</span>
                    <w-checkbox-submit ng-model="$ctrl.checkedHash[user.address]"></w-checkbox-submit>
                </div>
            </li>
        </ul>

        <div class="import-modal__buttons-wrapper">
            <w-button w-modal-close class="big">
                <span w-i18n="modal.import.importCancel"></span>
            </w-button>
            <w-button on-click="$ctrl.importAccounts()" class="big submit">
                <span w-i18n="modal.import.importButton"></span>
            </w-button>
        </div>
    </div>

    <div ng-if="!$ctrl.userList.length">

        <h3 class="text-center basic-700" w-i18n="modal.import.selectAccountToImportFrom"></h3>
        <div class="text-center">
            <span class="body-2 basic-500" w-i18n="modal.import.selectAccountDescription"></span>

            <w-help-icon>
                <div class="help-icon__row headline-3">
                    <span w-i18n="Some browsers block pop-up windows by default."></span>
                </div>
                <div class="help-icon__row">
                    <span
                            w-i18n="For correct operation, we recommend that you allow pop-ups.
                        Instructions for browsers: Chrome, Safari,  Firefox, Opera."></span>
                </div>
            </w-help-icon>
        </div>

        <div ng-if="$ctrl.wasImportBeta && $ctrl.wasImportOld">

            <i class="import-modal__icon-error"></i>

            <h3 class="text-center basic-700" w-i18n="No accounts found"></h3>

            <div class="basic-500 body-2 text-center margin-4" ng-if="!$ctrl.wasImportBeta" w-i18n="We were unable to retrieve your accounts from the Waves Beta Client.
            Try importing from the Waves Lite Client."></div>

            <div class="basic-500 body-2 text-center margin-4" ng-if="!$ctrl.wasImportOld" w-i18n="We were unable to retrieve your accounts from the Waves Lite Client.
            Try importing from the Waves Beta Client."></div>

            <div class="basic-500 body-2 text-center margin-4" w-i18n="We were unable to retrieve your accounts.
            Please restore them by using their backup SEEDs."></div> <!-- todo @tsigel if unable to retreive -->

            <div class="import-modal__buttons-wrapper">
                <w-button class="big long"> <!-- todo @tsigel if not error? -->
                    <span w-i18n="Cancel"></span>
                </w-button>
                <w-button ng-if="!$ctrl.wasImportBeta" class="big long submit"> <!-- todo @tsigel if not error? -->
                    <span w-i18n="Import from Lite Client"></span>
                </w-button>
                <w-button ng-if="!$ctrl.wasImportOld" class="big long submit"> <!-- todo @tsigel if not error? -->
                    <span w-i18n="Import from Beta Client"></span>
                </w-button>
            </div>
            <w-button class="big long submit"> <!-- todo @tsigel if unable to retreive -->
                <span w-i18n="I understand"></span>
            </w-button>

        </div>

        <div ng-if="!$ctrl.wasImportBeta" class="import-modal__buttons-wrapper text-center">
            <div class="import-modal__block import-modal__block-beta">
                <div class="import-modal__icon-beta"></div>
                <div class="body-2 basic-700" w-i18n="Waves Beta Client"></div>
                <div class="caption-1 basic-500 margin-2" w-i18n="Import accounts from Waves Beta Client"></div>
                <w-button on-click="$ctrl.importFromBeta()"
                          class="submit tiny">
                    <span w-i18n="Select"></span>
                </w-button>
            </div>
            <div ng-if="!$ctrl.wasImportOld" class="import-modal__block import-modal__block-old">
                <div class="import-modal__icon-old"></div>
                <div class="body-2 basic-700" w-i18n="Waves Lite Client"></div>
                <div class="caption-1 basic-500 margin-2" w-i18n="Import accounts from Waves Lite Client"></div>
                <w-button on-click="$ctrl.importFromOld()"
                          class="submit tiny">
                    <span w-i18n="Select"></span>
                </w-button>
            </div>
        </div>
    </div>
</div>
