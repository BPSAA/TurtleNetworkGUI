<div class="white-bg">
    <div class="main-container movable" w-i18n-ns="app.migrate">
        <div class="main-container-wrapper update-centering-wrapper">

            <div class="footer__wrap return-wrap">
                <div ng-if="$ctrl._showMoving && !$ctrl._oldDesktop" class="return-button" ng-click="$ctrl._toHome()">
                    <div class="return-button__arrow"></div>
                    <div class="return-button__text" w-i18n="desktopUpdate.return"></div>
                </div>

                <div class="logo update-logo"></div>
            </div>


            <div class="center">
                <div class="update-wrapper" ng-if="$ctrl._oldDesktop && !$ctrl._showMoving">
                    <div>
                        <div class="migrate-modal__image migrate-modal__image_moving"></div>
                        <h3 class="migrate-modal__title" w-i18n="migrate.modalTitle.moving"></h3>
                        <div class="migrate-modal__text">
                            <p w-i18n="migrate.modalDesc.firstPart"></p>
                            <p w-i18n="migrate.modalDesc.secondPart"></p>
                            <p w-i18n="migrate.modalDesc.thirdPart"></p>
                        </div>

                        <w-button disabled="$ctrl.state === 'downloading'"
                                  ng-if="!$ctrl._hasAccounts"
                                  on-click="$ctrl.download()"
                                  class="submit big">
                            <span class='capitalize' w-i18n="migrate.modalButton.download"></span>
                        </w-button>
                        <w-button ng-if="$ctrl._hasAccounts"
                                  on-click="$ctrl._toMigration()"
                                  class="submit big">
                            <span class='capitalize' w-i18n="migrate.modalButton.moving"></span>
                        </w-button>

                        <div ng-if="$ctrl.state === 'downloading'">
                            <h3 w-i18n="desktopUpdate.pleaseWait"></h3>
                            <div class="download-bar__wrapper" ng-if="$ctrl.progress">
                                <div class="download-bar" ng-style="{'width': $ctrl.progress + '%'}"></div>
                            </div>
                            <w-button on-click="$ctrl._cancelDownload()">
                                <span class='capitalize' w-i18n="desktopUpdate.cancelDownloading"></span>
                            </w-button>
                        </div>

                    </div>
                </div>

                <div class="center update-wrapper" ng-if="$ctrl._showMoving">
                    <div class="progress-bar" ng-if="$ctrl.state !== 'downloading'">
                        <div class="progress-bar__item done"
                             ng-class="{ 'active': $ctrl.state === 'askDownload' || $ctrl.state === 'downloading' }">
                            <div class="progress-bar__item-number">1</div>
                            <div class="progress-bar__item-text" w-i18n="desktopUpdate.barDownload"></div>
                        </div>
                        <div class="progress-bar__item"
                             ng-class="{
                     'active': $ctrl.state === 'installAndRun' || $ctrl.state === 'downloading',
                     'done': $ctrl.state === 'success' || $ctrl.state === 'fail'
                     }">
                            <div class="progress-bar__item-number">2</div>
                            <div class="progress-bar__item-text" w-i18n="desktopUpdate.barInstall"></div>
                        </div>
                        <div class="progress-bar__item"
                             ng-class="{
                     'done': $ctrl.state === 'success',
                     'fail': $ctrl.state === 'fail'
                     }">
                            <div class="progress-bar__item-number">3</div>
                            <div class="progress-bar__item-text"
                                 w-i18n="{{$ctrl.state === 'fail' ? 'desktopUpdate.fail' : 'desktopUpdate.barDone'}}"></div>
                        </div>
                    </div>
                    <div class="text-center">

                        <div ng-if="$ctrl.state === 'askDownload'">
                            <div class="step-title" w-i18n="desktopUpdate.haveYouDownloaded"></div>
                            <div class="buttons-wrapper">
                                <w-button class="big" on-click="$ctrl.state = 'installAndRun'">
                                    <span class='capitalize' w-i18n="desktopUpdate.downloaded"></span>
                                </w-button>
                                <w-button class="big submit" on-click="$ctrl.download()">
                                    <span class='capitalize' w-i18n-ns="app.welcome" w-i18n="welcome.download"></span>
                                </w-button>
                            </div>
                        </div>

                        <div ng-if="$ctrl.state === 'downloading'">
                            <div class="step-title" w-i18n="desktopUpdate.pleaseWait"></div>
                            <div class="download-bar__wrapper">
                                <div class="download-bar" ng-style="{'width': $ctrl.progress + '%'}"></div>
                            </div>
                            <div class='cancel-btn' ng-click="$ctrl._cancelDownload()">
                                <span class='capitalize cancel-btn' w-i18n="desktopUpdate.cancelDownloading"></span>
                            </div>
                        </div>

                        <div ng-if="$ctrl.state === 'installAndRun'">
                            <div class="step-title" w-i18n="desktopUpdate.installAndRun"></div>

                            <div class="buttons-wrapper">
                                <w-button class="big" on-click="$ctrl.state = 'askDownload'">
                                    <span class='capitalize' w-i18n="desktopUpdate.backToPrevious"></span>
                                </w-button>
                                <w-button class="big submit" on-click="$ctrl.state = 'fail'">
                                    <span class='capitalize' w-i18n="desktopUpdate.downloaded"></span>
                                </w-button>
                            </div>
                        </div>

                        <div ng-if="$ctrl.state === 'success'">
                            <div class="step-title" w-i18n="desktopUpdate.almostThere"></div>
                            <div class="basic-500" w-i18n="desktopUpdate.toFinish"></div>
                            <w-button ng-if="!$ctrl._oldDesktop" class="big submit" on-click="$ctrl._toHome()">
                                <span class='capitalize' w-i18n="desktopUpdate.iUnderstand"></span>
                            </w-button>
                        </div>

                        <div ng-if="$ctrl.state === 'fail'">
                            <div class="fail-icon"></div>
                            <div class="step-title step-title_fail" w-i18n="desktopUpdate.oops"></div>
                            <div class="basic-500 headline-3 fail-text" w-i18n="desktopUpdate.failText"></div>
                            <w-button class="big submit try-again-btn" on-click="$ctrl._tryAgain()">
                                <span class='capitalize' w-i18n="desktopUpdate.tryAgain"></span>
                            </w-button>
                            <div class="basic-500 look-at-faq">
                                <div class="look-at-faq__item">
                                    <span w-i18n="desktopUpdate.lookAtFAQ1"></span>
                                    <span class="link" ng-click="$ctrl.showFAQ()">FAQ</span>
                                    .
                                    <span w-i18n="desktopUpdate.lookAtFAQ2"></span>
                                </div>
                                <div class="look-at-faq__item" w-i18n="desktopUpdate.connectSupport"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <w-footer class="footer update-footer"></w-footer>

</div>