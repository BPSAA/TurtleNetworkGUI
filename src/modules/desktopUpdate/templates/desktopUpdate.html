<div class="main-container movable" w-i18n-ns="app.migration">
    <div class="main-container-wrapper">
        <div class="center" ng-if="$ctrl._oldDesktop && !$ctrl._showMoving">
            <div>
                <div class="migrate-modal__image migrate-modal__image_moving"></div>
                <h3 class="migrate-modal__title" w-i18n="migrate.modalTitle.moving"></h3>
                <div class="migrate-modal__text">
                    <p w-i18n="migrate.modalDesc.firstPart"></p>
                    <p w-i18n="migrate.modalDesc.secondPart"></p>
                    <p w-i18n="migrate.modalDesc.thirdPart"></p>
                </div>
                <w-button ng-if="!$ctrl._hasAccounts" class="submit big" on-click="$ctrl.download()">
                    <span w-i18n="migrate.modalButton.download"></span>
                </w-button>
                <w-button ng-if="$ctrl._hasAccounts" class="submit big" on-click="$ctrl._toMigration()">
                    <span w-i18n="migrate.modalButton.moving"></span>
                </w-button>

                <div ng-if="$ctrl.state === 'downloading'">
                    <h3 w-i18n="desktopUpgrade.pleaseWait"></h3>
                    <div class="download-bar__wrapper">
                        <div class="download-bar" ng-style="{'width': $ctrl.progress + '%'}"></div>
                    </div>
                </div>

            </div>
        </div>

        <div ng-if="$ctrl._showMoving && !$ctrl._oldDesktop" class="return-button" ng-click="$ctrl._toHome()">
            <div class="return-button__arrow">s</div>
            <div class="return-button__text" w-i18n="desktopUpgrade.return"></div>
        </div>
        <div class="center" ng-if="$ctrl._showMoving">
            <div class="progress-bar">
                <div class="progress-bar__item done"
                     ng-class="{ 'active': $ctrl.state === 'askDownload' || $ctrl.state === 'downloading' }">
                    <div class="progress-bar__item-number">1</div>
                    <div class="progress-bar__item-text" w-i18n="desktopUpgrade.barDownload"></div>
                </div>
                <div class="progress-bar__item"
                     ng-class="{
                     'active': $ctrl.state === 'installAndRun' || $ctrl.state === 'downloading',
                     'done': $ctrl.state === 'success' || $ctrl.state === 'fail'
                     }">
                    <div class="progress-bar__item-number">2</div>
                    <div class="progress-bar__item-text" w-i18n="desktopUpgrade.barInstall"></div>
                </div>
                <div class="progress-bar__item"
                     ng-class="{
                     'done': $ctrl.state === 'success',
                     'fail': $ctrl.state === 'fail'
                     }">
                    <div class="progress-bar__item-number">3</div>
                    <div class="progress-bar__item-text" w-i18n="desktopUpgrade.barDone"></div>
                </div>
            </div>
            <div class="text-center">

                <div ng-if="$ctrl.state === 'askDownload'">
                    <h3 w-i18n="desktopUpgrade.haveYouDownloaded"></h3>
                    <div class="buttons-wrapper">
                        <w-button class="big" on-click="$ctrl.state = 'installAndRun'">
                            <span w-i18n="desktopUpgrade.downloaded"></span>
                        </w-button>
                        <w-button class="big submit" on-click="$ctrl.download()">
                            <span w-i18n="desktopUpgrade.wantDownload"></span>
                        </w-button>
                    </div>
                </div>

                <div ng-if="$ctrl.state === 'downloading'">
                    <h3 w-i18n="desktopUpgrade.pleaseWait"></h3>
                    <div class="download-bar__wrapper">
                        <div class="download-bar" ng-style="{'width': $ctrl.progress + '%'}"></div>
                    </div>
                </div>

                <div ng-if="$ctrl.state === 'installAndRun'">
                    <h3 w-i18n="desktopUpgrade.installAndRun"></h3>

                    <div class="buttons-wrapper">
                        <w-button class="big" on-click="$ctrl.state = 'askDownload'">
                            <span w-i18n="desktopUpgrade.backToPrevious"></span>
                        </w-button>
                        <w-button class="big submit" on-click="$ctrl.state = 'fail'">
                            <span w-i18n="desktopUpgrade.yesIHave"></span>
                        </w-button>
                    </div>
                </div>

                <div ng-if="$ctrl.state === 'success'">
                    <h3 w-i18n="desktopUpgrade.almostThere"></h3>
                    <div class="basic-500" w-i18n="desktopUpgrade.toFinish"></div>
                    <w-button class="big submit" on-click="$ctrl._toHome()">
                        <span w-i18n="desktopUpgrade.iUnderstand"></span>
                    </w-button>
                </div>

                <div ng-if="$ctrl.state === 'fail'">
                    <h3 w-i18n="desktopUpgrade.fail"></h3>
                    <div class="basic-500" w-i18n="desktopUpgrade.failText"></div>
                    <w-button class="big submit" on-click="$ctrl.state = 'askDownload'">
                        <span w-i18n="desktopUpgrade.tryAgain"></span>
                    </w-button>
                    <div class="basic-500" w-i18n="desktopUpgrade.lookAtFAQ"></div>
                </div>

            </div>
        </div>
    </div>
</div>

<w-footer class="footer"></w-footer>
